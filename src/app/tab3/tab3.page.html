<ion-content fullscreen="true">
  <h1>Réservation(s) en cours</h1>

  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content
      pullingIcon="chevron-down-circle-outline"
      refreshingSpinner="circles"
    >
    </ion-refresher-content>
  </ion-refresher>

  <ion-card *ngFor="let res of reservationData" class="custom-card">
    <ion-item>
      <ion-button fill="clear" slot="end" class="message-icon" (click)="navigateToTab2()">
        <ion-icon name="chatbubbles-outline"></ion-icon>
      </ion-button>
    </ion-item>
    <ion-card-header>
      <img [src]="res.Photos" alt="Image de l'emplacement">
      <h2>{{ res.address }}</h2>
    </ion-card-header>
    <ion-card-content>
      <p><strong>Description:</strong> {{ res.description }}</p>
      <p><strong>Parking Type:</strong> {{ res.parkingType }}</p>
      <p><strong>Prix/heure:</strong> {{ res.price }} EUR</p>
      <p><strong>Jour:</strong> {{ res.day }}</p>
      <p><strong>Début de réservation:</strong> {{ res.departureTime }}</p>
      <p><strong>Fin de réservation:</strong> {{ res.endTime }}</p>
      
      <ion-select placeholder="Sélectionnez un véhicule" [(ngModel)]="selectedCar" (ionChange)="onCarChange($event)">
        <ion-select-option *ngFor="let vehicle of vehicles" [value]="vehicle">
          {{ vehicle.marque }} - {{ vehicle.plaque }}
        </ion-select-option>
      </ion-select>
      <p *ngIf="!res.isPayed" class="countdown"><strong>Temps restant:</strong> {{ res.countdown }}</p>
      <p *ngIf="res.isPayed" class="reserved"><strong>Réservé!</strong></p>

      <ion-button (click)="confirmReservation(res)" class="custom-button">Confirmer la réservation</ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>

  